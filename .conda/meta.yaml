# Setup a list of packages that aren't conda installable
# OpenCV is available but we want to install from conda-forge in post build
{% set conda_package_nonexistent = (
    "opencv-python",
    "PySide2"
) %}

{% set data = load_setup_py_data() %}

source:
  path: ../

package:
  # Repeating name because of the following issue:
  # https://github.com/conda/conda-build/issues/2475
  name: sleap
  version: 0.1.0

about:
  home: {{ data.get('url') }}
  license: {{ data.get('license') }}
  summary: {{ data.get('description') }}

source:
  path: ../

requirements:
  host:
    - python
    - setuptools
    - pip
    {% for req in data.get('setup_requires', [])
        if req not in conda_package_nonexistent -%}
    - {{req}}
    {% endfor %}
    {% for req in data.get('install_requires', [])
        if req not in conda_package_nonexistent -%}
    - {{req}}
    {% endfor %}

  run:
    - python
    {% for req in data.get('install_requires', [])
        if req not in conda_package_nonexistent -%}
    - {{req}}
    {% endfor %}
