# Setup a list of packages that aren't conda installable
{% set conda_skip = (
    "cattrs"         # No conda package
    "opencv-python", # We will pip install it because we want ffmpeg
    "PySide2"        # Doesn't exist in conda defaults
    "imgaug"         # Brings in matplotlib, which needs pyqt, which we don't want
) %}

{% set data = load_setup_py_data() %}

source:
  path: ../

package:
  # Repeating name because of the following issue:
  # https://github.com/conda/conda-build/issues/2475
  name: sleap
  version: 0.1.0

about:
  home: {{ data.get('url') }}
  license: {{ data.get('license') }}
  summary: {{ data.get('description') }}

source:
  path: ../

requirements:
  host:
    - python
    - setuptools
    - pip
    {% for req in data.get('setup_requires', [])
        if req not in conda_skip -%}
    - {{req}}
    {% endfor %}
    {% for req in data.get('install_requires', [])
        if req not in conda_skip -%}
    - {{req}}
    {% endfor %}

  run:
    - python
    {% for req in data.get('install_requires', [])
        if req not in conda_skip -%}
    - {{req}}
    {% endfor %}
